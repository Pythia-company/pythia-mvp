(function(){var e={48736:function(e,t,a){"use strict";a.d(t,{Z:function(){return cs}});var n=a(49242),s=a(73396);function r(e,t){const a=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(a)}var o=a(40089);const i={},l=(0,o.Z)(i,[["render",r]]);var d=l,c=a(5404),u=a.n(c);const m="https://uj5tozevki90.usemoralis.com:2053/server",p="cKC95YPjyNN8qvLLqEEeGiYZwwc1qRZd8MqoBegb",y=[{inputs:[{internalType:"uint256[2]",name:"_sharesOwned",type:"uint256[2]"},{internalType:"uint256[2]",name:"_moneyWaged",type:"uint256[2]"},{internalType:"address",name:"_priceFeedAddress",type:"address"},{internalType:"uint256",name:"_strikePrice",type:"uint256"},{internalType:"uint256",name:"_resolutionDate",type:"uint256"},{internalType:"uint256",name:"_wageDeadline",type:"uint256"}],name:"createMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"payTokenAddress",type:"address"},{internalType:"address",name:"priceFeederAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!1,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256[2]",name:"sharesBought",type:"uint256[2]"},{indexed:!1,internalType:"uint256[2]",name:"moneyWaged",type:"uint256[2]"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"marketId",type:"uint256"}],name:"MarketCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"marketId",type:"uint256"}],name:"MarketResolved",type:"event"},{inputs:[{internalType:"bytes",name:"performData",type:"bytes"}],name:"performUpkeep",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"uint256[2]",name:"_moneyToWage",type:"uint256[2]"}],name:"wageMoney",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!1,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"moneyWithdrawed",type:"uint256"},{indexed:!1,internalType:"uint256",name:"expertScore",type:"uint256"}],name:"Withdrawed",type:"event"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"address",name:"_playerAddress",type:"address"}],name:"_calcExpertScore",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"address",name:"_playerAddress",type:"address"}],name:"_calcReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"checkData",type:"bytes"}],name:"checkUpkeep",outputs:[{internalType:"bool",name:"upkeepNeeded",type:"bool"},{internalType:"bytes",name:"performData",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"}],name:"getMarketInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"bool",name:"",type:"bool"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNumMarkets",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_player",type:"address"},{internalType:"uint256",name:"_marketId",type:"uint256"}],name:"getPlayerInfo",outputs:[{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"uint256[2]",name:"",type:"uint256[2]"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"numMarkets",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"uint256",name:"_outcome",type:"uint256"},{internalType:"uint256",name:"_moneyToWage",type:"uint256"}],name:"numSharesForPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],h="0x2B7137d2941F0240C4378b3a015c0DD6Eb581e39",g=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],w="0x04DF6e4121c27713ED22341E7c7Df330F56f289B",f="kovan",k=10,v=10,b=5;var _=a(70678);function D(e,t,a,n,r,o){const i=(0,s.up)("NavBar"),l=(0,s.up)("HomeContent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i),(0,s.Wm)(l)],64)}var I=a(87139);const W={class:"home-content-container"};function T(e,t,a,n,r,o){const i=(0,s.up)("CreateMarket"),l=(0,s.up)("MarketsDashboard");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:(0,I.C_)(["platform-description",{"blur-class":o.condition}])}," Pythia: harness Crypto technology to automate expert indentification ",2),(0,s.Wm)(i,{assetNames:r.filters.assetNames},null,8,["assetNames"]),(0,s._)("div",{class:(0,I.C_)(["outer-container",{"blur-class":o.condition}])},[(0,s._)("div",W,[(0,s.Wm)(l,{assetNames:r.filters.assetNames,volumeOptions:r.filters.volumeOptions,wageDeadlineOptions:r.filters.wageDeadlineOptions},null,8,["assetNames","volumeOptions","wageDeadlineOptions"])])],2)],64)}const S=e=>((0,s.dD)("data-v-aac4f500"),e=e(),(0,s.Cn)(),e),P={class:"create-market-div"},O=(0,s.Uk)(" CREATE MARKET "),x=S((()=>(0,s._)("i",{class:"fas fa-plus"},null,-1))),M=[O,x],C={key:1,class:"create-market-window"},A={class:"market-description"},z=S((()=>(0,s._)("div",{class:"description-component"},"Will",-1))),U={style:{display:"flex","flex-direction":"column","justify-content":"center"}},F=S((()=>(0,s._)("div",{class:"description-component"},"exceed",-1))),N={class:"description-component",style:{position:"relative"}},$={key:0,class:"error-message"},j=S((()=>(0,s._)("div",{class:"description-component"},"by",-1))),q={class:"description-component",style:{position:"relative"}},B={key:0,class:"error-message"},Z=S((()=>(0,s._)("i",{class:"fa-solid fa-calendar",style:{position:"absolute"}},null,-1))),H=S((()=>(0,s._)("div",{class:"description-component"},"?",-1))),Y={class:"wage-deadline-container",style:{position:"relative"}},V=S((()=>(0,s._)("div",{class:"description-component"},"Wage deadline",-1))),E={class:"description-component",style:{position:"relative"}},L={key:0,class:"error-message"},R=S((()=>(0,s._)("i",{class:"fa-solid fa-calendar",style:{position:"absolute"}},null,-1))),K={class:"item-val market-stats"},G=S((()=>(0,s._)("div",null,null,-1))),J=S((()=>(0,s._)("div",{class:"market-info-text"},"No",-1))),Q=S((()=>(0,s._)("div",{class:"market-info-text"},"Yes",-1))),X=S((()=>(0,s._)("div",{class:"market-info-text"}," Initial money waged ",-1))),ee={style:{position:"relative"}},te={key:0,class:"error-message"},ae={style:{position:"relative"}},ne={key:0,class:"error-message"},se=S((()=>(0,s._)("div",{class:"market-info-text"}," Initial shares created ",-1))),re={style:{position:"relative"}},oe={key:0,class:"error-message"},ie={style:{position:"relative"}},le={key:0,class:"error-message"},de={class:"button-group"};function ce(e,t,a,r,o,i){const l=(0,s.up)("DropDown"),d=(0,s.up)("PopUpWindow");return(0,s.wg)(),(0,s.iD)("div",P,[!o.clicked&i.isLoggedIn?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>i.click&&i.click(...e)),class:"create-market-button"},M)):(0,s.kq)("",!0),o.clicked&i.isLoggedIn?((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",null,[(0,s._)("i",{class:"fa-solid fa-xmark",onClick:t[1]||(t[1]=(...e)=>i.cancel&&i.cancel(...e))})]),(0,s._)("div",A,[z,(0,s._)("div",U,[(0,s.Wm)(l,{defaultValue:"ETH/USD",objects:a.assetNames,height:"100px",background:"#16446c",ref:"dropdown"},null,8,["objects"])]),F,(0,s._)("div",N,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["description-input",{"incorrect-field":!o.formStatus.strikePrice.correct}]),placeholder:"2000","onUpdate:modelValue":t[2]||(t[2]=e=>o.marketParams.strikePrice=e)},null,2),[[n.nr,o.marketParams.strikePrice]]),o.formStatus.strikePrice.correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",$,(0,I.zw)(o.formStatus.strikePrice.message),1))]),j,(0,s._)("div",q,[(0,s.wy)((0,s._)("input",{type:"date",class:(0,I.C_)(["description-input",{"incorrect-field":!o.formStatus.resolveDate.correct}]),"onUpdate:modelValue":t[3]||(t[3]=e=>o.marketParams.resolveDate=e)},null,2),[[n.nr,o.marketParams.resolveDate]]),o.formStatus.resolveDate.correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",B,(0,I.zw)(o.formStatus.resolveDate.message),1)),Z]),H]),(0,s._)("div",Y,[V,(0,s._)("div",E,[(0,s.wy)((0,s._)("input",{type:"date",class:(0,I.C_)(["description-input",{"incorrect-field":!o.formStatus.wageDeadline.correct}]),"onUpdate:modelValue":t[4]||(t[4]=e=>o.marketParams.wageDeadline=e)},null,2),[[n.nr,o.marketParams.wageDeadline]]),o.formStatus.wageDeadline.correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",L,(0,I.zw)(o.formStatus.wageDeadline.message),1)),R]),(0,s.Wm)(d,{text:"Deadline for waging money in this market",background:"#134876",width:"120px",height:"90px"})]),(0,s._)("div",K,[G,J,Q,X,(0,s._)("div",ee,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["market-stats-component no-annot",{"incorrect-field":!o.formStatus.moneyWaged[0].correct}]),placeholder:"10","onUpdate:modelValue":t[5]||(t[5]=e=>o.marketParams.moneyWaged[0]=e)},null,2),[[n.nr,o.marketParams.moneyWaged[0]]]),o.formStatus.moneyWaged[0].correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",te,(0,I.zw)(o.formStatus.moneyWaged[0].message),1))]),(0,s._)("div",ae,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["market-stats-component yes-annot",{"incorrect-field":!o.formStatus.moneyWaged[1].correct}]),placeholder:"10","onUpdate:modelValue":t[6]||(t[6]=e=>o.marketParams.moneyWaged[1]=e)},null,2),[[n.nr,o.marketParams.moneyWaged[1]]]),o.formStatus.moneyWaged[1].correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ne,(0,I.zw)(o.formStatus.moneyWaged[1].message),1))]),se,(0,s._)("div",re,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["market-stats-component no-annot",{"incorrect-field":!o.formStatus.sharesOwned[0].correct}]),placeholder:"10","onUpdate:modelValue":t[7]||(t[7]=e=>o.marketParams.sharesOwned[0]=e)},null,2),[[n.nr,o.marketParams.sharesOwned[0]]]),o.formStatus.sharesOwned[0].correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",oe,(0,I.zw)(o.formStatus.sharesOwned[0].message),1))]),(0,s._)("div",ie,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["market-stats-component yes-annot",{"incorrect-field":!o.formStatus.sharesOwned[1].correct}]),placeholder:"10","onUpdate:modelValue":t[8]||(t[8]=e=>o.marketParams.sharesOwned[1]=e)},null,2),[[n.nr,o.marketParams.sharesOwned[1]]]),o.formStatus.sharesOwned[1].correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",le,(0,I.zw)(o.formStatus.sharesOwned[1].message),1))])]),(0,s._)("div",de,[(0,s._)("button",{class:"submit-button",onClick:t[9]||(t[9]=(...e)=>i.createMarket&&i.createMarket(...e))},"Create Market")])])):(0,s.kq)("",!0)])}const ue=e=>{let t=new Date(1e3*parseInt(e));return t},me=e=>(e=new Date(e),e.getDate().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getFullYear().toString()),pe=(e=null)=>{let t;return e||(e=new Date,t=Math.floor(e.getTime()/1e3)),e instanceof Date||(e=Date.parse(e)),e=new Date(e),e.setUTCHours(12,0,0,0),t=Math.floor(e.getTime()/1e3),t},ye=e=>parseFloat(cs.Units.FromWei(e,18)),he=e=>{const t=[...e];for(let a=0;a<t.length;a++)t[a]=cs.Units.ETH(`${t[a]}`);return t},ge=e=>e>=100?Math.round(e):e>=10?Math.round(10*e)/10:e>=.1?Math.round(100*e)/100:Math.round(1e3*e)/1e3,we=async()=>{const e={chain:f,address:h,function_name:"getNumMarkets",abi:y,params:{}};try{let t=await cs.Web3API.native.runContractFunction(e);return t.toString()}catch(t){console.error(t)}},fe=async e=>{const t={chain:f,address:h,function_name:"getMarketInfo",abi:y,params:{_marketId:e}};try{let a=await cs.Web3API.native.runContractFunction(t),n=await cs.Cloud.run("getAssets",{priceFeed:a[0]});n=n[0],n=n.get("asset");let s={marketId:e,asset:n,strikePrice:ye(a[1][0]),resolvePrice:ye(a[1][1]),wageDeadline:ue(a[2][0]),resolveDate:ue(a[2][0]),sharesOwned:[ye(a[3][0]),ye(a[3][1])],moneyWaged:[ye(a[4][0]),ye(a[4][1])],resolved:a[5],winningOutcome:parseInt(a[6])};return console.log(s),s}catch(a){return console.error(a),!1}},ke=async(e,t)=>{const a={chain:f,address:h,function_name:"getPlayerInfo",abi:y,params:{_player:e,_marketId:t}};try{let e=await cs.Web3API.native.runContractFunction(a);const t={sharesOwned:[ye(e[0][0]),ye(e[0][1])],moneyWaged:[ye(e[1][0]),ye(e[1][1])],reward:ye(e[2]),expertScore:ye(e[3]),withdrawed:e[4]};return console.log(t),t}catch(n){return console.error(n),!1}},ve=async e=>{const t={chain:f,address:h,function_name:"numSharesForPrice",abi:y,params:e};try{let e=await cs.Web3API.native.runContractFunction(t);return e=ge(ye(e)),e}catch(a){console.error(a)}},be=async(e,t)=>{let a={chain:f,address:h,function_name:"_calcExpertScore",abi:y,params:{_marketId:t,_playerAddress:e}};const n=await cs.Web3API.native.runContractFunction(a);return console.log(n),ye(n)},_e=async(e,t)=>{let a={chain:f,address:h,function_name:"_calcReward",abi:y,params:{_marketId:t,_playerAddress:e}};const n=await cs.Web3API.native.runContractFunction(a);return console.log(n),ye(n)},De=async e=>{await cs.enableWeb3();let t={chain:f,contractAddress:w,functionName:"approve",abi:g,params:{spender:h,amount:e}};try{await cs.executeFunction(t),console.log(`approved ${e} of token`)}catch(a){console.error(a)}},Ie=async e=>{const t=e._moneyWaged.reduce(((e,t)=>e+t));await De(t);let a={chain:f,contractAddress:h,functionName:"createMarket",abi:y,params:e};try{await cs.executeFunction(a),console.log("market created")}catch(n){console.error(n)}};let We=async e=>{const t={chain:f,contractAddress:h,functionName:"wageMoney",abi:y,params:e},a=t.params._moneyToWage.reduce(((e,t)=>e+t));await De(a);try{await cs.executeFunction(t),console.log("money waged")}catch(n){console.error(n)}},Te=async e=>{const t={chain:f,contractAddress:h,functionName:"withdraw",abi:y,params:{_marketId:e}};try{return await cs.executeFunction(t),console.log("money withdrawed"),!0}catch(a){return console.error(a),!1}};const Se=e=>((0,s.dD)("data-v-06ae0a87"),e=e(),(0,s.Cn)(),e),Pe=Se((()=>(0,s._)("i",{class:"fa-solid fa-caret-down"},null,-1))),Oe=["onClick"];function xe(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",{style:(0,I.j5)({background:a.background,color:"white"}),class:"drop-down-container"},[(0,s._)("div",{class:"input",onClick:t[0]||(t[0]=e=>o.press())},[(0,s.Uk)((0,I.zw)(r.input)+" ",1),Pe]),r.selected?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,style:(0,I.j5)({height:a.height,background:a.background,"z-index":"10"}),class:"dropdown"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.objects,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,onClick:t=>o.select(e),class:"dropdown-el"},(0,I.zw)(e),9,Oe)))),128))],4))],4)}var Me={props:["defaultValue","objects","height","background"],data(){return{input:this.defaultValue,selected:!0}},methods:{press(){this.selected?this.selected=!1:this.selected=!0},select(e){this.selected=!0,this.input=e}}};const Ce=(0,o.Z)(Me,[["render",xe],["__scopeId","data-v-06ae0a87"]]);var Ae=Ce;function ze(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[r.show?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",{key:0,onClick:t[0]||(t[0]=e=>r.show=!0),class:"fa-solid fa-circle-info",style:{top:"25%",position:"relative"}})),r.show?((0,s.wg)(),(0,s.iD)("div",{key:1,style:(0,I.j5)({background:a.background,width:a.width,height:a.height,position:"absolute"}),class:"popup"},[(0,s.Uk)((0,I.zw)(a.text)+" ",1),(0,s._)("button",{onClick:t[1]||(t[1]=e=>r.show=!1),class:"close-button"},"close")],4)):(0,s.kq)("",!0)])}var Ue={props:["text","background","width","height"],data(){return{show:!1}}};const Fe=(0,o.Z)(Ue,[["render",ze],["__scopeId","data-v-726b16c8"]]);var Ne=Fe,$e={components:{DropDown:Ae,PopUpWindow:Ne},props:["assetNames"],data(){return{marketParams:{asset:"",strikePrice:null,wageDeadline:"",resolveDate:"",moneyWaged:[null,null],sharesOwned:[null,null]},formStatus:{strikePrice:{correct:!0,message:""},wageDeadline:{correct:!0,message:""},resolveDate:{correct:!0,message:""},moneyWaged:{0:{correct:!0,message:""},1:{correct:!0,message:""}},sharesOwned:{0:{correct:!0,message:""},1:{correct:!0,message:""}}},clicked:!1}},methods:{click(){this.$store.state.showForm=!0,this.clicked=!0},cancel(){this.clicked=!1,this.$store.state.showForm=!1},async getAsset(){const e=this.$refs.dropdown.input,t=await cs.Cloud.run("getAssets",{asset:e});let a=t[0];return a},validateStrikePrice(){const e=this.marketParams.strikePrice;null==e?(this.formStatus.strikePrice.correct=!1,this.formStatus.strikePrice.message="strike price invalid"):e<0?(this.formStatus.strikePrice.correct=!1,this.formStatus.strikePrice.message="strike price < 0"):this.formStatus.strikePrice.correct=!0},validateWageDeadline(){const e=pe(),t=pe(this.marketParams.wageDeadline);t<e?(this.formStatus.wageDeadline.correct=!1,this.formStatus.wageDeadline.message="wage deadline has passed"):this.formStatus.wageDeadline.correct=!0},validateResolveDate(){const e=pe(this.marketParams.resolveDate),t=pe(this.marketParams.wageDeadline);e<t?(this.formStatus.resolveDate.correct=!1,this.formStatus.resolveDate.message="resolution < wage deadline"):this.formStatus.resolveDate.correct=!0},validateMoneyWaged(){for(let e=0;e<2;e++)this.marketParams.moneyWaged[e]<v?(this.formStatus.moneyWaged[e].correct=!1,this.formStatus.moneyWaged[e].message="insufficient money"):this.formStatus.moneyWaged[e].correct=!0},validateSharesOwned(){for(let e=0;e<2;e++)this.marketParams.sharesOwned[e]<k?(this.formStatus.sharesOwned[e].correct=!1,this.formStatus.sharesOwned[e].message="insufficient shares"):this.formStatus.sharesOwned[e].correct=!0},getFormStatus(){return!!(this.formStatus.strikePrice.correct&this.formStatus.wageDeadline.correct&this.formStatus.resolveDate.correct&this.formStatus.moneyWaged[0].correct&this.formStatus.moneyWaged[1].correct&this.formStatus.sharesOwned[0].correct&this.formStatus.sharesOwned[1].correct)},async createMarket(){const e=await this.getAsset(),t=e.get("asset"),a=e.get("priceFeed"),n=this.marketParams.strikePrice;this.validateStrikePrice();const s=this.marketParams.moneyWaged;this.validateMoneyWaged();const r=this.marketParams.sharesOwned;this.validateSharesOwned();const o=pe(this.marketParams.wageDeadline);this.validateWageDeadline();const i=pe(this.marketParams.resolveDate);this.validateResolveDate();const l=this.getFormStatus();if(l){const e={_sharesOwned:he(r),_moneyWaged:he(s),_priceFeedAddress:a,_strikePrice:he([n])[0],_resolutionDate:i,_wageDeadline:o},l=await we();console.log("market_id",l);try{await Ie(e)}catch(d){return console.error(d),!1}const c=this.marketParams.moneyWaged.reduce(((e,t)=>e+t)),u=this.marketParams.sharesOwned.reduce(((e,t)=>e+t)),m={marketId:l,asset:t,strikePrice:n,resolvePrice:0,wageDeadline:ue(o),resolveDate:ue(i),volume:c,volumeShares:u,resolved:!1,winningOutcome:0};await cs.Cloud.run("saveMarket",{values:m}),console.log("market saved!");const p={marketId:l,player:this.$store.state.user.get("ethAddress"),strikePrice:n,withdrawed:!1,expertScore:0,reward:0,sharesOwned:r,moneyWaged:s};await cs.Cloud.run("savePlayer",{values:p}),console.log("player saved!"),this.$router.go()}}},computed:{isLoggedIn(){return!!this.$store.state.user}}};const je=(0,o.Z)($e,[["render",ce],["__scopeId","data-v-aac4f500"]]);var qe=je;const Be=e=>((0,s.dD)("data-v-c11bff04"),e=e(),(0,s.Cn)(),e),Ze=Be((()=>(0,s._)("div",{class:"title"}," Available Markets ",-1))),He={class:"filters-container"},Ye=Be((()=>(0,s._)("div",{style:{"margin-right":"10px","font-size":"14px"}},[(0,s.Uk)(" Filter by "),(0,s._)("i",{class:"fa-solid fa-filter"})],-1))),Ve={style:{display:"flex","justify-content":"center","align-items":"center"}},Ee=Be((()=>(0,s._)("div",{style:{"margin-left":"10px","font-size":"14px"}},"Volume:",-1))),Le=Be((()=>(0,s._)("div",{style:{"margin-left":"10px","font-size":"14px"}},"Asset:",-1))),Re=Be((()=>(0,s._)("div",{style:{"margin-left":"10px","font-size":"14px"}},"Wage Deadline:",-1))),Ke={class:"markets-display"},Ge=["onClick"],Je={class:"item-val description"},Qe={class:"item-container"},Xe={style:{display:"flex","align-items":"center"}},et=Be((()=>(0,s._)("div",{class:"item-type"},"Volume: ",-1))),tt={class:"item-val"},at={key:0,class:"resolved"},nt={key:1,class:"unresolved"};function st(e,t,a,n,r,o){const i=(0,s.up)("DropDown");return(0,s.wg)(),(0,s.iD)("div",null,[Ze,(0,s._)("div",He,[Ye,(0,s._)("div",Ve,[Ee,(0,s.Wm)(i,{defaultValue:"All",objects:o.getOptions(a.volumeOptions),height:"80px",background:"#091420",ref:"volumeOptions",style:{width:"70px",margin:"5px"}},null,8,["objects"]),Le,(0,s.Wm)(i,{defaultValue:"All",objects:a.assetNames,height:"80px",background:"#091420",ref:"assetNames",style:{width:"100px",margin:"5px"}},null,8,["objects"]),Re,(0,s.Wm)(i,{defaultValue:"All",objects:o.getOptions(a.wageDeadlineOptions),height:"80px",background:"#091420",ref:"wageDeadlineOptions",style:{width:"100px",margin:"5px"}},null,8,["objects"])]),(0,s._)("button",{class:"apply-button",onClick:t[0]||(t[0]=e=>o.findMarkets())},"Apply filters")]),(0,s._)("div",Ke,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.markets,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"market-info unselectable",key:t,onClick:a=>e.$router.push(`/markets/${t.get("marketId")}`)},[(0,s._)("div",null,[(0,s._)("div",Je,(0,I.zw)(o.getDescription(t)),1)]),(0,s._)("div",null," Wage Deadline: "+(0,I.zw)(o.getWageDeadline(t)),1),(0,s._)("div",Qe,[(0,s._)("div",Xe,[et,(0,s._)("div",tt,(0,I.zw)(Math.round(100*t.get("volume"))/100)+" Dai",1)]),(0,s._)("div",null,[t.get("resolved")?((0,s.wg)(),(0,s.iD)("div",at,"Resolved")):(0,s.kq)("",!0),t.get("resolved")?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nt,"Unresolved"))])])],8,Ge)))),128))])])}var rt={components:{DropDown:Ae},props:["assetNames","volumeOptions","wageDeadlineOptions"],data(){return{searchInput:"",markets:{}}},methods:{async findMarkets(){let e=this.$refs.assetNames.input;""===e&&(e=null);const t=this.volumeOptions[this.$refs.volumeOptions.input],a=this.wageDeadlineOptions[this.$refs.wageDeadlineOptions.input];console.log(a,t,e),this.markets=await cs.Cloud.run("getMarkets",{filters:{asset:e,volume:t,wageDeadline:a}})},getOptions(e){return Object.keys(e)},getWageDeadline(e){return me(e.get("wageDeadline"))},getDescription(e){return"Will "+e.get("asset").toUpperCase()+" exceed "+e.get("strikePrice")+" by "+me(e.get("resolveDate"))+" ?"}},async created(){const e=await cs.Cloud.run("getMarkets");this.markets=e}};const ot=(0,o.Z)(rt,[["render",st],["__scopeId","data-v-c11bff04"]]);var it=ot,lt={components:{CreateMarket:qe,MarketsDashboard:it},data(){return{filters:{assetNames:[],volumeOptions:{},wageDeadlineOptions:{}}}},methods:{async loadAssets(){const e=await cs.Cloud.run("getAssets"),t=[];t.push("All");for(let a of e)t.push(a.get("asset").toUpperCase());return t},wageDeadlineOptions(){let e=new Date;e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);let t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+7),a=new Date(e.getFullYear(),e.getMonth()+1,e.getDate());return{All:"All","24h":e,"this week":t,"this month":a}},async getFilters(){this.filters.assetNames=await this.loadAssets(),this.filters.volumeOptions={All:"All","> 100":100,"> 1000":1e3,"> 10000":1e5},this.filters.wageDeadlineOptions=this.wageDeadlineOptions()}},computed:{condition(){return this.$store.state.showForm&&this.$store.state.user}},async created(){await this.getFilters()}};const dt=(0,o.Z)(lt,[["render",T],["__scopeId","data-v-361a09b0"]]);var ct=dt,ut=a.p+"img/pythia-providence-eye.b310a6f9.svg";const mt=e=>((0,s.dD)("data-v-4b65b170"),e=e(),(0,s.Cn)(),e),pt={class:"nav-bar"},yt=mt((()=>(0,s._)("div",{class:"protocol-name-container"},[(0,s._)("img",{src:ut,width:"60",height:"60",fill:"none"})],-1))),ht={class:"nav-bar-inner"},gt={key:0},wt={style:{display:"flex","justify-content":"center","align-items":"center"}};function ft(e,t,a,n,r,o){const i=(0,s.up)("NavButton"),l=(0,s.up)("LoginUi");return(0,s.wg)(),(0,s.iD)("div",pt,[yt,(0,s._)("div",ht,[o.isHome?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gt,[(0,s.Wm)(i,{path:"/",text:"Home"})])),(0,s._)("div",null,[(0,s.Wm)(i,{path:"/leaderboard",text:"Leaderboard"})]),(0,s._)("div",null,[(0,s.Wm)(i,{path:"/assets",text:"Assets"})]),(0,s._)("div",null,[(0,s.Wm)(i,{path:"/user-guide",text:"User guide"})]),(0,s._)("div",wt,[(0,s.Wm)(l)])])])}function kt(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=t=>e.$router.push(a.path)),class:"home-button"},(0,I.zw)(a.text),1)}var vt={props:["path","text"]};const bt=(0,o.Z)(vt,[["render",kt],["__scopeId","data-v-7c8dfd6c"]]);var _t=bt;const Dt=e=>((0,s.dD)("data-v-30aaf30e"),e=e(),(0,s.Cn)(),e),It=Dt((()=>(0,s._)("img",{src:"https://raw.githubusercontent.com/blakewood84/react-metamask/main/public/images/metamask.svg",alt:"My Happy SVG",width:"12",height:"12"},null,-1))),Wt=(0,s.Uk)(" Connect Wallet "),Tt=[It,Wt],St=Dt((()=>(0,s._)("img",{src:"https://raw.githubusercontent.com/blakewood84/react-metamask/main/public/images/metamask.svg",alt:"My Happy SVG",width:"12",height:"12"},null,-1))),Pt=(0,s.Uk)(" Disconnect "),Ot=[St,Pt];function xt(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[o.isLoggedIn?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>o.logIn&&o.logIn(...e)),class:"login-button"},Tt)),o.isLoggedIn?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>o.logOut&&o.logOut(...e)),class:"login-button"},Ot)):(0,s.kq)("",!0)],64)}var Mt={methods:{async logIn(){await this.$store.commit("logIn"),console.log("logged in")},async logOut(){await this.$store.commit("logOut"),console.log("logged out")}},computed:{isLoggedIn(){return!!this.$store.state.user}}};const Ct=(0,o.Z)(Mt,[["render",xt],["__scopeId","data-v-30aaf30e"]]);var At=Ct,zt={computed:{isLoggedIn(){return!!this.$store.state.user},isHome(){let e="home"===this.$route.name;return e}},components:{NavButton:_t,LoginUi:At}};const Ut=(0,o.Z)(zt,[["render",ft],["__scopeId","data-v-4b65b170"]]);var Ft=Ut,Nt={components:{HomeContent:ct,NavBar:Ft}};const $t=(0,o.Z)(Nt,[["render",D]]);var jt=$t;function qt(e,t,a,n,r,o){const i=(0,s.up)("NavBar"),l=(0,s.up)("MarketDisplay");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i),(0,s.Wm)(l)],64)}const Bt={class:"container-around"},Zt={key:0,class:"market-info-space"},Ht={class:"state-and-buy-container"};function Yt(e,t,a,n,r,o){const i=(0,s.up)("MarketInfo"),l=(0,s.up)("MarketState"),d=(0,s.up)("BuyShares");return(0,s.wg)(),(0,s.iD)("div",Bt,[r.marketData.marketInfo?((0,s.wg)(),(0,s.iD)("div",Zt,[(0,s.Wm)(i,{marketData:r.marketData},null,8,["marketData"]),(0,s._)("div",Ht,[(0,s.Wm)(l,{marketData:r.marketData},null,8,["marketData"]),(0,s.Wm)(d,{marketData:r.marketData},null,8,["marketData"])])])):(0,s.kq)("",!0)])}const Vt=e=>((0,s.dD)("data-v-4272785a"),e=e(),(0,s.Cn)(),e),Et={class:"market-info"},Lt={class:"info-container"},Rt=(0,s.Uk)(" Will "),Kt={class:"description-item-val"},Gt=(0,s.Uk)(" exceed "),Jt={class:"description-item-val"},Qt=(0,s.Uk)(" by "),Xt={class:"description-item-val"},ea=(0,s.Uk)(" ? "),ta={class:"info-container",style:{width:"max-content"}},aa=(0,s.Uk)(" Wage Deadline: "),na={class:"description-item-val"},sa={class:"field-with-buttons"},ra={class:"button-container"},oa={key:0,class:"item-val market-stats market-stats-dashboard"},ia=Vt((()=>(0,s._)("div",null,null,-1))),la=Vt((()=>(0,s._)("div",{class:"market-info-text"},"No",-1))),da=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Yes",-1))),ca=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Money Waged",-1))),ua={class:"market-stats-component no-annot"},ma={class:"market-stats-component yes-annot"},pa=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Shares Owned",-1))),ya={class:"market-stats-component no-annot"},ha={class:"market-stats-component yes-annot"},ga={key:1,class:"item-val market-stats my-portfolio-dashboard"},wa=Vt((()=>(0,s._)("div",null,null,-1))),fa=Vt((()=>(0,s._)("div",{class:"market-info-text"},"No",-1))),ka=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Yes",-1))),va=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Money Waged",-1))),ba={class:"market-stats-component no-annot"},_a={class:"market-stats-component yes-annot"},Da=Vt((()=>(0,s._)("div",{class:"market-info-text"},"Shares Owned",-1))),Ia={class:"market-stats-component no-annot"},Wa={class:"market-stats-component yes-annot"};function Ta(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",Et,[(0,s._)("div",Lt,[Rt,(0,s._)("span",Kt,(0,I.zw)(a.marketData.marketInfo.asset.toUpperCase()),1),Gt,(0,s._)("span",Jt,(0,I.zw)(a.marketData.marketInfo.strikePrice),1),Qt,(0,s._)("span",Xt,(0,I.zw)(o._dateToStr(a.marketData.marketInfo.resolveDate)),1),ea]),(0,s._)("div",ta,[aa,(0,s._)("span",na,(0,I.zw)(o._dateToStr(a.marketData.marketInfo.wageDeadline)),1)]),(0,s._)("div",sa,[(0,s._)("div",ra,[(0,s._)("button",{ref:"marketStats",name:"marketStats",onClick:t[0]||(t[0]=e=>o.click("marketStats")),class:(0,I.C_)(["market-info-button",{market:r.buttons.marketStats}])},"Market Stats",2),e.$store.state.user?((0,s.wg)(),(0,s.iD)("button",{key:0,ref:"myPortfolio",name:"myPortfolio",onClick:t[1]||(t[1]=e=>o.click("myPortfolio")),class:(0,I.C_)(["portfolio-info-button",{portfolio:r.buttons.myPortfolio}])},"My Portfolio",2)):(0,s.kq)("",!0)]),r.buttons.marketStats?((0,s.wg)(),(0,s.iD)("div",oa,[ia,la,da,ca,(0,s._)("div",ua,(0,I.zw)(o.round(a.marketData.marketInfo.moneyWaged[0]))+"$ ",1),(0,s._)("div",ma,(0,I.zw)(o.round(a.marketData.marketInfo.moneyWaged[1]))+"$ ",1),pa,(0,s._)("div",ya,(0,I.zw)(o.round(a.marketData.marketInfo.sharesOwned[0])),1),(0,s._)("div",ha,(0,I.zw)(o.round(a.marketData.marketInfo.sharesOwned[1])),1)])):(0,s.kq)("",!0),r.buttons.myPortfolio?((0,s.wg)(),(0,s.iD)("div",ga,[wa,fa,ka,va,(0,s._)("div",ba,(0,I.zw)(o.round(a.marketData.playerInfo.moneyWaged[0]))+"$ ",1),(0,s._)("div",_a,(0,I.zw)(o.round(a.marketData.playerInfo.moneyWaged[1]))+"$ ",1),Da,(0,s._)("div",Ia,(0,I.zw)(o.round(a.marketData.playerInfo.sharesOwned[0])),1),(0,s._)("div",Wa,(0,I.zw)(o.round(a.marketData.playerInfo.sharesOwned[1])),1)])):(0,s.kq)("",!0)])])}var Sa={props:["marketData"],data(){return{buttons:{marketStats:!0,myPortfolio:!1}}},methods:{click(e){const t=this.$refs[e].name;this.buttons[t]||(this.buttons[t]=!0,"myPortfolio"===t?this.buttons.marketStats=!1:"marketStats"===t&&(this.buttons.myPortfolio=!1))},round(e){return ge(e)},_dateToStr(e){return me(e)}}};const Pa=(0,o.Z)(Sa,[["render",Ta],["__scopeId","data-v-4272785a"]]);var Oa=Pa;const xa=e=>((0,s.dD)("data-v-c939b2f2"),e=e(),(0,s.Cn)(),e),Ma={key:0,class:"buy-shares-outer"},Ca={class:"buy-withdraw-buttons"},Aa={key:0,class:"buy-shares-inner"},za=xa((()=>(0,s._)("div",null,"No",-1))),Ua=xa((()=>(0,s._)("div",null,"Yes",-1))),Fa={style:{position:"relative"}},Na={key:0,class:"error-message"},$a={class:"grid-spec dynamic-stats"},ja=xa((()=>(0,s._)("div",{class:"dynamic-stats-title"},"Shares to receive",-1))),qa={class:"dynamic-stats-group"},Ba={class:"dynamic-stats-element"},Za={class:"dynamic-stats-element"},Ha={class:"grid-spec submit-button-div"},Ya={key:1,class:"withdraw-money-inner"},Va={class:"withdraw-money-stats"},Ea=xa((()=>(0,s._)("div",null,"% of winning shares",-1))),La={class:"withdraw-money-stat-values"},Ra=xa((()=>(0,s._)("div",null,"% of winning money",-1))),Ka={class:"withdraw-money-stat-values"},Ga=xa((()=>(0,s._)("div",null,"Money won",-1))),Ja={class:"withdraw-money-stat-values"},Qa=xa((()=>(0,s._)("div",null,"Expert score",-1))),Xa={class:"withdraw-money-stat-values"},en={class:"withdraw-button-div"};function tn(e,t,a,r,o,i){return e.$store.state.user?((0,s.wg)(),(0,s.iD)("div",Ma,[(0,s._)("div",Ca,[(0,s._)("button",{class:(0,I.C_)(["buy-button",{"buy-button-active":o.buttons.buy}]),ref:"buy",name:"buy",onClick:t[0]||(t[0]=e=>i.click("buy"))},"Wage Money",2),a.marketData.marketInfo.resolved?((0,s.wg)(),(0,s.iD)("button",{key:0,class:(0,I.C_)(["withdraw-button",{"withdraw-button-active":o.buttons.withdraw}]),ref:"withdraw",name:"withdraw",onClick:t[1]||(t[1]=e=>i.click("withdraw"))},"Withdraw",2)):(0,s.kq)("",!0)]),o.buttons.buy?((0,s.wg)(),(0,s.iD)("div",Aa,[za,Ua,(0,s._)("div",{class:"market-stats no-annot",style:(0,I.j5)({background:`linear-gradient(to right, #571f1f91 ${i.getOdds[0]}%, transparent ${i.getOdds[0]}%, transparent)`})},[(0,s._)("span",null,(0,I.zw)(i.getOdds[0])+"%",1)],4),(0,s._)("div",{class:"market-stats yes-annot",style:(0,I.j5)({background:`linear-gradient(to right, #1a5447c2 ${i.getOdds[1]}%, transparent ${i.getOdds[1]}%, transparent)`})},[(0,s._)("span",null,(0,I.zw)(i.getOdds[1])+"%",1)],4),(0,s._)("div",Fa,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["buy-shares-input",{"incorrect-field":!o.formStatus.moneyToWage.correct}]),placeholder:"0","onUpdate:modelValue":t[2]||(t[2]=e=>o.buyInfo.moneyToWage[0]=e),onKeyup:t[3]||(t[3]=e=>i.calcShares(0))},null,34),[[n.nr,o.buyInfo.moneyToWage[0]]]),o.formStatus.moneyToWage.correct?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Na,(0,I.zw)(o.formStatus.moneyToWage.message),1))]),(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"number",class:(0,I.C_)(["buy-shares-input",{"incorrect-field":!o.formStatus.moneyToWage.correct}]),placeholder:"0","onUpdate:modelValue":t[4]||(t[4]=e=>o.buyInfo.moneyToWage[1]=e),onKeyup:t[5]||(t[5]=e=>i.calcShares(1))},null,34),[[n.nr,o.buyInfo.moneyToWage[1]]])]),(0,s._)("div",$a,[ja,(0,s._)("div",qa,[(0,s._)("div",Ba,(0,I.zw)(i.round(o.buyInfo.sharesToBuy[0])),1),(0,s._)("div",Za,(0,I.zw)(i.round(o.buyInfo.sharesToBuy[1])),1)])]),(0,s._)("div",Ha,[(0,s._)("button",{class:(0,I.C_)(["submit-button",{unclickable:a.marketData.marketInfo.resolved}]),onClick:t[6]||(t[6]=(...e)=>i.wageMoney&&i.wageMoney(...e))},"Buy",2)])])):(0,s.kq)("",!0),o.buttons.withdraw?((0,s.wg)(),(0,s.iD)("div",Ya,[(0,s._)("div",Va,[Ea,(0,s._)("div",La,(0,I.zw)(i.round(i.winMoneyPercent))+"%",1),Ra,(0,s._)("div",Ka,(0,I.zw)(i.round(i.winSharesPercent))+"%",1),Ga,(0,s._)("div",Ja,(0,I.zw)(i.round(a.marketData.withDrawInfo.reward))+" Dai",1),Qa,(0,s._)("div",Xa,(0,I.zw)(i.round(a.marketData.withDrawInfo.expertScore)),1)]),(0,s._)("div",en,[(0,s._)("button",{class:(0,I.C_)(["withdraw-button-submit",{unclickable:i.isWithdrawed||o.withdrawed}]),onClick:t[7]||(t[7]=e=>i.withDrawWinnings())},"Withdraw",2)])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var an={props:["marketData"],data(){return{withdrawed:!1,buyInfo:{odds:[0,0],moneyToWage:[null,null],sharesToBuy:[0,0]},formStatus:{moneyToWage:{correct:!0,message:""}},buttons:{buy:!0,withdraw:!1}}},methods:{click(e){const t=this.$refs[e].name;this.buttons[t]||(this.buttons[t]=!0,"buy"===t?this.buttons.withdraw=!1:"withdraw"===t&&(this.buttons.buy=!1))},round(e){return ge(e)},validateMoneyWaged(){const e=this.buyInfo.moneyToWage.reduce(((e,t)=>e+t));e<b?(this.formStatus.moneyToWage.correct=!1,this.formStatus.moneyToWage.message="insufficient money"):this.formStatus.moneyToWage.correct=!0},getFormStatus(){return!!(this.formStatus.moneyToWage.correct&this.formStatus.moneyToWage.correct)},async calcShares(e){let t=0;if(this.buyInfo.sharesToBuy[e]=t,null==this.buyInfo.moneyToWage[e])this.buyInfo.sharesToBuy[e]=0;else if(this.buyInfo.moneyToWage[e]>0){const a={_marketId:this.marketData.marketInfo.marketId,_outcome:`${e}`,_moneyToWage:he([this.buyInfo.moneyToWage[e]])[0]};t=await ve(a),this.buyInfo.sharesToBuy[e]=t}},async wageMoney(){console.log("money to wage",this.moneyToWage);const e=this.$route.params.marketId.toString(),t=null!=this.buyInfo.moneyToWage[0]?this.buyInfo.moneyToWage[0]:0,a=null!=this.buyInfo.moneyToWage[1]?this.buyInfo.moneyToWage[1]:0,n=he([t,a]);console.log(n),this.validateMoneyWaged();let s=this.getFormStatus();if(console.log("form status",this.formStatus),s)try{await We({_marketId:e,_moneyToWage:n})}catch(r){return!1}},async withDrawWinnings(){const e=this.$route.params.marketId.toString();try{await Te(e)}catch(t){return!1}this.withdrawed=!0,cs.Cloud.run("savePlayer",{filters:{player:this.marketData.playerInfo.player,marketId:this.marketData.playerInfo.player.marketId},values:{withdrawed:!0,reward:this.marketData.withDrawInfo.reward,expertScore:this.marketData.withDrawInfo.expertScore}})}},computed:{getOdds(){const e=this.marketData.marketInfo.moneyWaged[0]+this.buyInfo.moneyToWage[0],t=this.marketData.marketInfo.moneyWaged[1]+this.buyInfo.moneyToWage[1],a=this.marketData.marketInfo.sharesOwned[0]+this.buyInfo.sharesToBuy[0],n=this.marketData.marketInfo.sharesOwned[1]+this.buyInfo.sharesToBuy[1],s=e/n+t/a;return[ge(100*e/(s*n)),ge(100*t/(s*a))]},winMoneyPercent(){console.log(this.marketData);const e=this.marketData.marketInfo.winningOutcome;return null!==this.marketData.playerInfo?100*this.marketData.playerInfo.moneyWaged[e]/this.marketData.marketInfo.moneyWaged[e]:0},winSharesPercent(){const e=this.marketData.marketInfo.winningOutcome;return null!==this.marketData.playerInfo?100*this.marketData.playerInfo.sharesOwned[e]/this.marketData.marketInfo.sharesOwned[e]:0},isWithdrawed(){return console.log(this.marketData.playerInfo.withdrawed),this.marketData.playerInfo.withdrawed}}};const nn=(0,o.Z)(an,[["render",tn],["__scopeId","data-v-c939b2f2"]]);var sn=nn;const rn=e=>((0,s.dD)("data-v-819d058a"),e=e(),(0,s.Cn)(),e),on={key:0,class:"outer-container"},ln=rn((()=>(0,s._)("div",{class:"market-state-container"},[(0,s._)("div",{class:"market-resolved"},"Resolved")],-1))),dn={class:"winning-outcome-container"},cn=rn((()=>(0,s._)("div",null,"Winning Outcome:",-1))),un={class:"winning-outcome-container"},mn=rn((()=>(0,s._)("div",null,"Resolution price:",-1))),pn={key:1,class:"market-state-container"},yn=rn((()=>(0,s._)("div",{class:"market-unresolved"},"Unresolved",-1))),hn=[yn];function gn(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.marketData.marketInfo.resolved?((0,s.wg)(),(0,s.iD)("div",on,[ln,(0,s._)("div",dn,[cn,(0,s._)("div",null,(0,I.zw)(a.marketData.marketInfo.winningOutcome),1)]),(0,s._)("div",un,[mn,(0,s._)("div",null,(0,I.zw)(o.round(a.marketData.marketInfo.resolvePrice)),1)])])):(0,s.kq)("",!0),a.marketData.marketInfo.resolved?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",pn,hn))],64)}var wn={props:["marketData"],methods:{round(e){return ge(e)}}};const fn=(0,o.Z)(wn,[["render",gn],["__scopeId","data-v-819d058a"]]);var kn=fn,vn={components:{MarketInfo:Oa,BuyShares:sn,MarketState:kn},data(){return{marketData:{withDrawInfo:null,marketInfo:null,playerInfo:null}}},methods:{async loadMarket(e){let t=await fe(e);const a=t.moneyWaged.reduce(((e,t)=>e+t)),n=t.sharesOwned.reduce(((e,t)=>e+t)),s=t.resolvePrice,r=t.resolved,o=t.winningOutcome;if(0==a)return null;const i={resolvePrice:s,volume:a,volumeShares:n,resolved:r,winningOutcome:o};return await cs.Cloud.run("saveMarket",{filters:{marketId:e},values:i}),t},async loadPlayer(e,t){let a=await ke(e,t);a["player"]=e,a["marketId"]=t;const n={sharesOwned:a.sharesOwned,moneyWaged:a.moneyWaged,reward:a.reward,expertScore:a.expertScore,withdrawed:a.withdrawed};return console.log("player info"),await cs.Cloud.run("savePlayer",{filters:{marketId:t,player:e},values:n}),a},async loadWithdrawStats(e,t){const a=await _e(e,t),n=await be(e,t);return{reward:a,expertScore:n}}},async created(){const e=this.$route.params.marketId.toString(),t=await this.loadMarket(e);this.marketData.marketInfo=t;const a=this.$store.state.user.get("ethAddress");if(null!==a){const n=await this.loadPlayer(a,e);if(this.marketData.playerInfo=n,t.resolved){const t=await this.loadWithdrawStats(a,e);this.marketData.withDrawInfo=t}}console.log(this.marketData)}};const bn=(0,o.Z)(vn,[["render",Yt],["__scopeId","data-v-4cd90128"]]);var _n=bn,Dn={components:{MarketDisplay:_n,NavBar:Ft}};const In=(0,o.Z)(Dn,[["render",qt]]);var Wn=In;function Tn(e,t,a,n,r,o){const i=(0,s.up)("NavBar"),l=(0,s.up)("UserGuide");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i),(0,s.Wm)(l)],64)}const Sn=e=>((0,s.dD)("data-v-4e7388a0"),e=e(),(0,s.Cn)(),e),Pn={class:"user-guide-container"},On=Sn((()=>(0,s._)("div",{class:"user-guide"},[(0,s._)("h1",null,"Pythia User Guide"),(0,s._)("h2",null,"1. What is Pythia:"),(0,s._)("div",null," Pythia is a dApp on Polygon and the Kovan testnet that allows users to create markets and bet on their outcomes anonymously. Correct predictions are automatically identified and rewarded. But Pythia is much more than just a betting app. We aim to build a platform to identify and verify expertise fairly and provably. Why is provable expertise important? Today society is highly polarised. Unfortunately, many existing Web2 applications, far from reducing, have actually amplified the division resulting in less productive discourse based on factual knowledge and expertise, conducive to social progress. At Pythia, we believe that blockchain technology can help to right these wrongs. While still in its infancy, Pythia will empower true experts in a variety of industries to bridge existing social, political, and economic divides through their expertise. At the moment, the variety of our markets is limited to crypto, but in the future, Pythia will enable market creation for non-financial (e.g., politics, sports, science etc.) markets. ")],-1))),xn=[On];function Mn(e,t){return(0,s.wg)(),(0,s.iD)("div",Pn,xn)}const Cn={},An=(0,o.Z)(Cn,[["render",Mn],["__scopeId","data-v-4e7388a0"]]);var zn=An,Un={components:{UserGuide:zn,NavBar:Ft}};const Fn=(0,o.Z)(Un,[["render",Tn]]);var Nn=Fn;function $n(e,t,a,n,r,o){const i=(0,s.up)("NavBar"),l=(0,s.up)("LeaderTable");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i),(0,s.Wm)(l)])}const jn=e=>((0,s.dD)("data-v-2ec56dae"),e=e(),(0,s.Cn)(),e),qn={class:"leader-board"},Bn=jn((()=>(0,s._)("div",{class:"player-info table-title"},[(0,s._)("i",{class:"fa-solid fa-hashtag"}),(0,s._)("div",null,"Player's address"),(0,s._)("div",null,"Expert points"),(0,s._)("div",null,"Reward received")],-1)));function Zn(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",qn,[Bn,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.ranking,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"player-info table-content"},[(0,s._)("div",null,(0,I.zw)(t+1),1),(0,s._)("div",null,(0,I.zw)(e.objectId),1),(0,s._)("div",null,(0,I.zw)(o.round(e.expertScore)),1),(0,s._)("div",null,(0,I.zw)(o.round(e.reward))+" Dai",1)])))),128))])}var Hn={data(){return{ranking:[]}},methods:{round(e){return ge(e)},async getRanking(){const e=await cs.Cloud.run("getTopPerformers");this.ranking=e}},async created(){await this.getRanking()}};const Yn=(0,o.Z)(Hn,[["render",Zn],["__scopeId","data-v-2ec56dae"]]);var Vn=Yn,En={components:{NavBar:Ft,LeaderTable:Vn}};const Ln=(0,o.Z)(En,[["render",$n]]);var Rn=Ln;function Kn(e,t,a,n,r,o){const i=(0,s.up)("NavBar"),l=(0,s.up)("DisplayAssets");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i),(0,s.Wm)(l)])}const Gn=e=>((0,s.dD)("data-v-584ae431"),e=e(),(0,s.Cn)(),e),Jn={class:"leader-board"},Qn=Gn((()=>(0,s._)("div",{class:"player-info table-title"},[(0,s._)("div",null,"Asset name"),(0,s._)("div",null,"Price Feed address")],-1)));function Xn(e,t,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",Jn,[Qn,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.assets,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"player-info table-content"},[(0,s._)("div",null,(0,I.zw)(e.get("asset").toUpperCase()),1),(0,s._)("div",null,(0,I.zw)(e.get("priceFeed")),1)])))),128))])}var es={data(){return{assets:{}}},methods:{async loadAssets(){const e=await cs.Cloud.run("getAssets");this.assets=e,console.log(e)}},async created(){await this.loadAssets()}};const ts=(0,o.Z)(es,[["render",Xn],["__scopeId","data-v-584ae431"]]);var as=ts,ns={components:{NavBar:Ft,DisplayAssets:as}};const ss=(0,o.Z)(ns,[["render",Kn]]);var rs=ss;const os=[{path:"/",name:"home",component:jt},{path:"/markets/:marketId",name:"markets",component:Wn},{path:"/user-guide",name:"user-guide",component:Nn},{path:"/leaderboard",name:"leaderboard",component:Rn},{path:"/assets",name:"assets",component:rs}],is=(0,_.p7)({history:(0,_.PO)(),routes:os});var ls=is,ds=a(20065);u().enableWeb3(),u().start({serverUrl:m,appId:p});var cs=u();const us=(0,ds.MT)({state(){return{user:u().User.current(),showForm:!1}},mutations:{async logIn(e){await u().authenticate(),e.user=u().User.current()},async logOut(e){await u().User.logOut(),e.user=u().User.current()}}});(0,n.ri)(d).use(ls).use(us).mount("#app")},46601:function(){},42480:function(){}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,n,s,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],r=e[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<o&&(o=r));if(i){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,o=n[0],i=n[1],l=n[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var c=l(a)}for(t&&t(n);d<o.length;d++)r=o[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkpythia_frontend"]=self["webpackChunkpythia_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(48736)}));n=a.O(n)})();
//# sourceMappingURL=app.dcd3f7b2.js.map